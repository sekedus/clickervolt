class CVTrack{static getClickInfo(){return window.clickerVolt&&window.clickerVolt.clickInfo?window.clickerVolt.clickInfo:null}static setCookie(a,b,c){var e=new Date;e.setTime(e.getTime()+1e3*(60*(60*(24*c))));var d="expires="+e.toUTCString();document.cookie=a+"="+b+";"+d+";path=/"}static getCookie(a){for(var b,d=a+"=",e=decodeURIComponent(document.cookie),f=e.split(";"),g=0;g<f.length;g++){for(b=f[g];" "==b.charAt(0);)b=b.substring(1);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return""}static getSuspiciousScore(a){return window.clickerVolt&&void 0!==window.clickerVolt.suspiciousScore?void a(window.clickerVolt.suspiciousScore):void setTimeout(function(){CVTrack.getSuspiciousScore(a)},500)}static loaded(a){window.clickerVolt||(window.clickerVolt={timeOnPageStart:Date.now()/1e3,referrer:CVTrack.getReferrer()}),a.slug&&a.serverUrl&&(CVTrack.trackView(a.slug,a.serverUrl),CVTrack.trackTimeOnPage(a.slug,a.serverUrl))}static trackView(a,b){var c="action=trackView";c+="&slug="+a,c+="&from="+encodeURIComponent(CVTrack.getHostURL()),c+="&ref="+btoa(window.clickerVolt.referrer),CVTrack.sendToServer(b,c,function(c){try{var d=JSON.parse(c);if(window.clickerVolt.clickInfo=d.clickInfo,d.htmlAfterRedirect&&CVTrack.injectHTML(d.htmlAfterRedirect),d.fraudDetection){var e=d.fraudDetection;e.recaptchaV3?CVTrack.trackSuspiciousScore(a,b,e.recaptchaV3):e.human&&CVTrack.trackIfHuman(a,b,e.human)}}catch(a){console.log("CVTrack.trackView() error: "+a)}})}static trackTimeOnPage(a,b){window.addEventListener("beforeunload",function(){var c="action=trackTime";c+="&timeOnPage="+(Date.now()/1e3-window.clickerVolt.timeOnPageStart),c+="&slug="+a,c+="&from="+encodeURIComponent(CVTrack.getHostURL()),c+="&ref="+btoa(window.clickerVolt.referrer),CVTrack.sendToServer(b,c)})}static trackIfHuman(a,b,c){var d=Math.ceil,e="&slug="+a;e+="&from="+encodeURIComponent(CVTrack.getHostURL()),e+="&a="+c.a,e+="&b="+c.b,e+="&c="+c.c,e+="&d="+c.d,e+="&e="+c.a+c.b+c.c+c.d;var h=d(Math.random()*c.r1),f=d(Math.random()*c.r2);e+="&f="+h,e+="&g="+f,e+="&h="+h*f,CVTrack.xhr("POST",b+"?action=trackIfHuman",e)}static trackSuspiciousScore(a,b,c){var d=c.siteKey;if(d){var e=c.hideBadge;if("yes"==e){var f=document.createElement("style");f.type="text/css",f.innerHTML="div.grecaptcha-badge { display: none !important; }",document.body.appendChild(f)}var g=document.createElement("script");g.setAttribute("src",`https://www.google.com/recaptcha/api.js?render=${d}`),g.onload=function(){grecaptcha.ready(function(){var c=a.split("-").join("_");try{grecaptcha.execute(d,{action:c}).then(function(c){var d="action=trackSuspiciousScore";d+="&token="+c,d+="&slug="+a,d+="&from="+encodeURIComponent(CVTrack.getHostURL()),CVTrack.sendToServer(b,d,function(a){try{var b=JSON.parse(a);window.clickerVolt.suspiciousScore=b.score}catch(a){console.log("CVTrack.trackSuspiciousScore() error: "+a)}})})}catch(a){console.log(a)}})},document.head.appendChild(g)}}static sendToServer(a,b,c){var d=!0;!c&&navigator.sendBeacon&&(d=!navigator.sendBeacon(a,b)),d&&CVTrack.xhr("GET",a,b,c)}static xhr(a,b,c,d){var e=new XMLHttpRequest;"GET"==a&&(b+="?"+c,c=null),e.open(a,b,d!==void 0),"POST"==a&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d&&(e.onreadystatechange=function(){this.readyState===4&&200===this.status&&d(this.response)}),e.send(c)}static getReferrer(){var a=null;try{a=window.top===window.self?document.referrer:window.top.document.referrer}catch(b){a=document.referrer}return a||(a=""),a}static extractURLVars(b){var c={},d=b.indexOf("?");if(-1!==d)for(var e=b.substring(d),g=e.split("?"),a=g[1].split("&"),h=0;h<a.length;h++){var i=a[h].split("="),f=i[0],j=i[1];void 0!==f&&void 0!==j&&(c[f]=j)}return c}static getHostURL(){var a=document.URL;if(window.top!==window.self)try{var b=CVTrack.extractURLVars(window.top.document.URL),c=CVTrack.extractURLVars(location.search);for(var d in b)c[d]=b[d];var e=Object.keys(c).map(function(a){return a+"="+c[a]}).join("&");0<a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),a+="?"+e}catch(a){}return a}static injectHTML(html,doc){doc||(doc=document);var c,frag=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=html;c=t.firstElementChild;)frag.appendChild(c);for(var script,scripts=frag.querySelectorAll("script"),i=0;i<scripts.length;i++){if(script=scripts[i],script.src){var tag=doc.createElement("script");tag.src=script.src,doc.head.appendChild(tag)}else eval(script.innerHTML,doc);script.parentNode.removeChild(script)}doc.body.appendChild(frag)}}